{"version":3,"sources":["webpack:///webpack/bootstrap 2b98b31ae9ad6eda9487","webpack:///./src/background/helpers/storage.js","webpack:///./src/background/helpers/message.js","webpack:///./src/background/app.js","webpack:///./src/background/context/editable.js","webpack:///./src/background/helpers/url.js","webpack:///./src/background/helpers/tab.js","webpack:///./src/background/context/generator.js","webpack:///./src/background/context/note.js"],"names":["name","getApiUrl","get","getApiKey","getPassphrase","passphrase","key","def","option","window","localStorage","getItem","sendMessage","message","callback","chrome","tabs","query","active","currentWindow","lastTabId","id","handleMessage","request","sender","sendResponse","console","log","runtime","onStartup","addListener","storage","setItem","contextMenus","create","focusOrCreateTab","extension","getURL","info","tab","url","pageUrl","host","parse","task","encodeURI","err","parser","document","createElement","href","windows","getAll","existingTab","i","j","update"],"mappings":"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","file":"background.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2b98b31ae9ad6eda9487","/**\n * Storage helper object\n */\nexport default {\n    name: 'storage',\n\n    /**\n     * Get the API Url out of the settings\n     * @returns {*}\n     */\n    getApiUrl: function () {\n        return this.get('apiUrl');\n    },\n\n    /**\n     * Get the API key out of the settings\n     * @returns {*}\n     */\n    getApiKey: function () {\n        return this.get('apiKey');\n    },\n\n    /**\n     * Get the passphrase (or temporary one)\n     *\n     * @returns {string}\n     */\n    getPassphrase: function () {\n        let passphrase = this.get('passphrase');\n\n        // Try to get the temporary one\n        if (!passphrase) {\n            passphrase = this.get('temporary_passphrase');\n        }\n\n        return passphrase;\n    },\n\n    /**\n     * Get an item out of the local storage (wrapper around window.localStorage)\n     *\n     * @param key {string}\n     * @param def {any}\n     *\n     * @returns {string}\n     */\n    get: function (key, def='') {\n        let option = window.localStorage.getItem(key);\n\n        if (option) {\n            return option;\n        }\n\n        return def;\n    },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/helpers/storage.js","/**\n * Message helper object\n */\nexport default {\n    name: 'message',\n\n    /**\n     * Send a message to the frontend (browser tab)\n     *\n     * @param message {object|string}\n     * @param callback {function}\n     */\n    sendMessage: function (message, callback = () => {}) {\n        chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\n            let lastTabId = tabs[0].id;\n            chrome.tabs.sendMessage(lastTabId, message, callback);\n        });\n    },\n\n    /**\n     * Handle Message\n     *\n     * @param request {string}\n     * @param sender {object}\n     * @param sendResponse {function}\n     * @returns {null}\n     */\n    handleMessage: function (request, sender, sendResponse) {\n        console.log('Chrome Handler called');\n\n        return null;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/background/helpers/message.js","import handleEditable from './context/editable'\nimport handleGenerate from './context/generator'\nimport handleNote from './context/note'\n\nimport tabHelper from './helpers/tab'\n\n// Make sure temporary passphrase is cleaned\nchrome.runtime.onStartup.addListener(function() {\n    chrome.storage.localStorage.setItem('temporary_passphrase', '')\n});\n\n/*--------Context-Menus--------*/\n\n// Nowpass menu on editable\nchrome.contextMenus.create({\n    \"title\": 'nowpass',\n    \"contexts\": ['editable'],\n    \"id\": 'editableInsert'\n});\n\n/* Show different task, selectable */\n// Login\nchrome.contextMenus.create({\n    \"title\": \"Insert Login\",\n    \"contexts\": ['editable'],\n    'parentId': 'editableInsert',\n    'onclick': handleEditable\n});\n\n// Generate\nchrome.contextMenus.create({\n    \"title\": \"Generate Password\",\n    \"contexts\": ['editable'],\n    'parentId': 'editableInsert',\n    'onclick': handleGenerate\n});\n\n// Secure Note\nchrome.contextMenus.create({\n    \"title\": 'Store selected text (encrypted)',\n    \"contexts\": ['selection'],\n    \"onclick\": handleNote\n});\n\n\n/* General nowpass menu */\nchrome.contextMenus.create({\n    \"title\": \"Open nowpass\",\n    \"contexts\": ['page'],\n    \"onclick\": () => {tabHelper.focusOrCreateTab(chrome.extension.getURL(\"views/start.html#/\"))}\n});\n\n/*--------End Context------------*/\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/app.js","import storage from '../helpers/storage'\nimport message from '../helpers/message'\nimport urlHelper from '../helpers/url'\n\n/**\n * Handler for edit (input) elements (For Logins), opening the right iFrame popup etc.\n *\n * @param info {object}\n * @param tab {object}\n */\nexport default function (info, tab) {\n    let passphrase = storage.getPassphrase();\n\n    if (!passphrase) {\n        focusOrCreateTab(chrome.extension.getURL(\"views/start.html#/unlock\"));\n\n        return;\n    }\n\n    let url = info.pageUrl;\n\n    try {\n        let host = urlHelper.parse(url).host;\n\n        // Handle\n        message.sendMessage({\n            task: 'elements',\n            url: chrome.extension.getURL(\"views/start.html#/insert/\" + encodeURI(host))\n        });\n    } catch (err) {\n        console.log('Could not take care of request ' + url)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/context/editable.js","/**\n * Helper for URLs\n */\nexport default {\n    name: 'url',\n\n    /**\n     * Get the parsed URL object for an string url\n     *\n     * @param url {string}\n     * @returns {HTMLAnchorElement}\n     */\n    parse(url) {\n        let parser = document.createElement('a');\n        parser.href = url;\n\n        return parser;\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/helpers/url.js","/**\n * Tab Helpers\n */\nexport default {\n    name: 'tab',\n\n    /**\n     * Focus or create a new tab with the given URL\n     * @async\n     * @param url {string}\n     */\n    focusOrCreateTab: function (url) {\n        chrome.windows.getAll({\"populate\":true}, function(windows) {\n            let existingTab = null;\n\n            for (let i in windows) {\n                let tabs = windows[i].tabs;\n\n                for (let j in tabs) {\n                    let tab = tabs[j];\n\n                    if (tab.url === url) {\n                        existingTab = tab;\n                        break;\n                    }\n                }\n            }\n\n            if (existingTab) {\n                chrome.tabs.update(existingTab.id, {\"selected\": true})\n                return;\n            }\n\n            chrome.tabs.create({\"url\": url, \"selected\": true});\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/helpers/tab.js","import storage from '../helpers/storage'\nimport message from '../helpers/message'\nimport urlHelper from '../helpers/url'\n\n/**\n * Handle teh generator popup\n *\n * @param info {object}\n * @param tab {object}\n */\nexport default function (info, tab) {\n    let passphrase = storage.getPassphrase();\n\n    if (!passphrase) {\n        focusOrCreateTab(chrome.extension.getURL(\"views/start.html#/unlock\"));\n\n        return;\n    }\n\n    let url = info.pageUrl;\n\n    try {\n        let host = urlHelper.parse(url).host;\n\n        // Handle\n        message.sendMessage({\n            task: 'generate',\n            url: chrome.extension.getURL(\"views/start.html#/generate/\" + encodeURI(host))\n        });\n    } catch (err) {\n        console.log('Could not take care of request ' + url)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/context/generator.js","import storage from '../helpers/storage'\nimport urlHelper from '../helpers/url'\n\n/**\n * Handle storing selected text secure not\n *\n * @param info {object}\n * @param tab {object}\n */\nexport default function (info, tab) {\n    let passphrase = storage.getPassphrase();\n\n    if (!passphrase) {\n        focusOrCreateTab(chrome.extension.getURL(\"views/start.html#/unlock\"));\n\n        return;\n    }\n\n    console.log('TODO');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background/context/note.js"],"sourceRoot":""}